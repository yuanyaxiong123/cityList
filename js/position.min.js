$(function(){var h=$(".aside").position().top;var b={};var g="";var d=[];city=city.sort(function(j,i){return(j.pinyin.charCodeAt(0)-i.pinyin.charCodeAt(0))});$.each(city,function(j,k){var i=k.pinyin[0];d.push(k.name);if(!b[i]){b[i]=[];b[i].push(k.name)}else{b[i].push(k.name)}});for(var f in b){g+='<li class="group" data-value="'+f+'">'+f+"</li>";for(var c=0;c<b[f].length;c++){g+='<li class="xuanze">'+b[f][c]+"</li>"}}$(".list ul").html(g);$(".btnbox")[0].addEventListener("touchmove",function(o){o.preventDefault();o=o.changedTouches[0];var p=o.clientY-h;if(p<10){p=10}var j=Math.floor($(".btnbox").height()/26);var l=Math.ceil(p/j);if(l>26){return}var i=$(".btnbox li").eq(l-1);if(i){var n=i.html();$(".echo").css("display","block").html(n);var k=document.querySelector(".list li[data-value="+n+"]");if(k){var m=k.offsetTop;$(".count").scrollTop(m)}}});function a(){$(".echo").css("display","none")}$(".btnbox")[0].addEventListener("touchend",a);$(".btnbox")[0].addEventListener("touchcancel",a);$(".cityinput").on({focus:function(){$(".aside").css("display","none")},blur:function(){$(".aside").css("display","block")}});var e=remote_ip_info.city||"";$(".positioncity").html(e);$(".hotlist").click(function(i){if(this==i.target){return}cookies({weizhi:$(i.target).html()},{expires:0,path:"/"});location.href="index.html"});$(".xuanze").click(function(){cookies({weizhi:$(this).html()},{expires:0,path:"/"});location.href="index.html"});$(".positioncity").click(function(){cookies({weizhi:$(this).html()},{expires:0,path:"/"});location.href="index.html"});$(".form .search").click(function(){var i=$(".form .cityinput ").val();if($.inArray(i,d)>-1){$(".zhezhao").addClass("active");$(".zhezhao .neirong").html("<span>"+i+"</span>")}else{alert("请输入正确的城市")}});$(".zhezhao").click(function(){$(".zhezhao").toggleClass("active")});$(".zhezhao .neirong").click(function(i){if(i.target.tagName=="SPAN"){cookies({weizhi:$(i.target).html()},{expires:0,path:"/"});location.href="index.html"}})});